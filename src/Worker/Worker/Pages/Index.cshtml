@page
@model IndexModel
@{
    ViewData["Title"] = "작업 관리";
}

<div class="page-container">
    <div class="page-header">
        <h2>작업 관리</h2>
    </div>

    <div class="page-content">
        <div class="split-container">
            <!-- 좌측: 작업 목록 및 생성 폼 -->
            <div class="split-left">
                <div class="card" style="height: 100%;">
                    <!-- 탭 메뉴 -->
                    <div class="tab-menu">
                        <button class="tab-button active" data-tab="create">새 작업</button>
                        <button class="tab-button" data-tab="active">진행 중</button>
                        <button class="tab-button" data-tab="history">작업 이력</button>
                    </div>

                    <!-- 탭 컨텐츠 -->
                    <div class="tab-content-wrapper">
                        <!-- 새 작업 생성 -->
                        <div class="tab-content active" id="tab-create">
                            <div class="tab-content-body">
                                <form id="create-job-form">
                                    <div class="form-row">
                                        <label for="project-select" class="form-label">프로젝트</label>
                                        <select class="form-select" id="project-select" required>
                                            <option value="">프로젝트 선택...</option>
                                        </select>
                                    </div>
                                    <div class="form-row">
                                        <label for="description" class="form-label">작업 설명</label>
                                        <textarea class="form-control" id="description" rows="8" required
                                            placeholder="Claude에게 요청할 작업 내용을 입력하세요..."></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-block">작업 시작</button>
                                </form>
                            </div>
                        </div>

                        <!-- 진행 중인 작업 -->
                        <div class="tab-content" id="tab-active">
                            <div class="tab-content-body scrollable">
                                <div id="active-jobs">
                                    <p class="text-muted">로딩 중...</p>
                                </div>
                            </div>
                        </div>

                        <!-- 작업 이력 -->
                        <div class="tab-content" id="tab-history">
                            <div class="tab-content-body scrollable">
                                <div id="job-history">
                                    <p class="text-muted">로딩 중...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 우측: 작업 상세 정보 -->
            <div class="split-right">
                <div id="job-detail-panel" class="job-detail-panel">
                    <div class="job-detail-header">
                        <h5>작업 상세 정보</h5>
                        <button class="close-button" onclick="closeJobDetail()">&times;</button>
                    </div>
                    <div class="job-detail-body" id="job-detail-content">
                        <div class="job-detail-placeholder">
                            <p>작업을 선택하면 상세 정보가 표시됩니다</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/jobs.js" asp-append-version="true"></script>
    <script src="~/js/job-detail.js" asp-append-version="true"></script>
}
